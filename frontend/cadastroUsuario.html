<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/LandPage/cadastroUsuario.css">

    <title>Criar conta - Solar Smart</title>
</head>

<body>

    <main class="card" aria-labelledby="titulo">
        <h1 id="titulo">Criar conta</h1>
        <p class="subtitle">Preencha os dados abaixo para criar sua conta na Solar Smart.</p>

        <form id="signupForm"  action="../backend/login-cadastro/cadastro_process.php"  method="POST">

            <div class="row">
                <label for="nome">Nome completo</label>
                <input id="nome" name="name" type="text" placeholder="Digite seu nome" required aria-required="true" />
                <div class="msg-error" id="nomeError" aria-live="polite"></div>
            </div>

            <div class="row">
                <label for="email">Email</label>
                <input id="email" name="email" type="email" placeholder="exemplo@dominio.com" required
                    aria-required="true" />
                <div class="msg-error" id="emailError" aria-live="polite"></div>
            </div>

            <div class="row">
                <label for="telefone">Telefone</label>
                <input id="telefone" name="telefone"  placeholder="(dd) xxxx-xxxx" required aria-required="true" type="text" />
                <div class="msg-error" id="telefoneError" aria-live="polite"></div>
            </div>

            <div class="row password-row">
                <div>
                    <label for="senha">Senha</label>
                    <input id="senha" name="senha" type="password" placeholder="Crie uma senha forte"
                        aria-describedby="requisitos" required />
                </div>

                <div>
                    <label for="confirmaSenha">Confirmar senha</label>
                    <input id="confirmaSenha" name="password_confirmation" type="password" placeholder="Repita a senha"
                        required />
                </div>
            </div>

            <div class="requisitos" id="requisitos" aria-live="polite">
                <strong>Requisitos da senha</strong>
                <ul>
                    <li><span class="check not-ok" id="c-length">—</span> Mínimo 8 caracteres</li>
                    <li><span class="check not-ok" id="c-upper">—</span> Uma letra maiúscula</li>
                    <li><span class="check not-ok" id="c-lower">—</span> Uma letra minúscula</li>
                    <li><span class="check not-ok" id="c-symbol">—</span> Um símbolo (ex: !@#\$%&*)</li>
                </ul>
            </div>

            <div class="msg-error" id="senhaError" aria-live="polite"></div>

            <div class="actions">
                <button id="btnSubmit" type="submit">Criar conta</button>
            </div>

            <div class="links">
                <a href="login.html">Já tenho conta</a>
                <a href="#/termos">Termos de uso</a>
            </div>
        </form>

    </main>

    <script>
        const senhaInput = document.getElementById('senha');
        const confirmaInput = document.getElementById('confirmaSenha');
        const btn = document.getElementById('btnSubmit');

        const cLength = document.getElementById('c-length');
        const cUpper = document.getElementById('c-upper');
        const cLower = document.getElementById('c-lower');
        const cSymbol = document.getElementById('c-symbol');

        function hasMinLength(s) {
            return s.length >= 8;
        }

        function hasUpper(s) {
            return /[A-Z]/.test(s);
        }

        function hasLower(s) {
            return /[a-z]/.test(s);
        }

        function hasSymbol(s) {
            return /[^A-Za-z0-9]/.test(s);
        }

        function updateChecks() {
            const s = senhaInput.value;

            toggleCheck(cLength, hasMinLength(s));
            toggleCheck(cUpper, hasUpper(s));
            toggleCheck(cLower, hasLower(s));
            toggleCheck(cSymbol, hasSymbol(s));

            btn.disabled = !(hasMinLength(s) && hasUpper(s) && hasLower(s) && hasSymbol(s));
        }

        function toggleCheck(el, ok) {
            if (ok) {
                el.classList.remove('not-ok');
                el.classList.add('ok');
                el.textContent = '✓';
            } else {
                el.classList.remove('ok');
                el.classList.add('not-ok');
                el.textContent = '—';
            }
        }

        function checkConfirm() {
            if (confirmaInput.value && senhaInput.value !== confirmaInput.value) {
                confirmaInput.style.borderColor = 'red';
            } else {
                confirmaInput.style.borderColor = '';
            }
        }

        senhaInput.addEventListener('input', () => {
            updateChecks();
            checkConfirm();
        });

        confirmaInput.addEventListener('input', checkConfirm);

        document.getElementById('signupForm').addEventListener('submit', function(e) {
            if (senhaInput.value !== confirmaInput.value) {
                alert('As senhas não coincidem!');
                confirmaInput.focus();
                e.preventDefault();
            }
        });

        updateChecks();
    </script>

</body>

</html>